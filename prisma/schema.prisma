// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

// Looking for ways to speed up your queries, or scale easily with your serverless or edge functions?
// Try Prisma Accelerate: https://pris.ly/cli/accelerate-init

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model JodexAdmin {
  id        String   @id @unique @default(uuid())
  email     String   @unique
  company   String   @default("Jodex")
  createdAt DateTime @default(now())
  updatedAt DateTime @default(now())
}

model Landlord {
  id          String           @id @unique @default(uuid())
  userName    String
  phoneNumber String?          @unique
  email       String
  password    String
  tenants     LandlordTenant[]
  property    Property[]
  company     String           @default("Jodex")
  createdAT   DateTime         @default(now())
  updatedAt   DateTime         @updatedAt
}

model Tenant {
  id                 String           @id @unique @default(uuid())
  userName           String
  email              String
  password           String
  landlords          LandlordTenant[]
  property           Property         @relation(fields: [landlordPropertyId], references: [id])
  createdAT          DateTime         @default(now())
  updatedAt          DateTime         @updatedAt
  company            String           @default("Jodex")
  landlordPropertyId String
}

model LandlordTenant {
  id         String   @id @unique @default(uuid())
  tenant     Tenant   @relation(fields: [tenantId], references: [id])
  tenantId   String
  landlord   Landlord @relation(fields: [landlordId], references: [id])
  landlordId String
  company    String   @default("Jodex")
}

model Property {
  id          String   @id @unique @default(uuid())
  flat        String
  unit        Int
  city        String
  state       String
  zipCode     Int
  description String
  rooms       Int
  bath        Int
  kitchen     Int
  diningRoom  Int
  pictures    String
  garage      Boolean
  wifi        Boolean
  houseType   String
  address     String
  landlord    Landlord @relation(fields: [landlordId], references: [id])
  landlordId  String
  createdAT   DateTime @default(now())
  updatedAt   DateTime @updatedAt
  company     String   @default("Jodex")
  Tenant      Tenant[]
}

enum UserType {
  landlord
  tenant
}

enum LandlordStatus {
  ACTIVE
  BLOCKED
}
